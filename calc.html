<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Advanced Investment Calculator</title>

<style>
body {
  margin: 0;
  background: #000;
  color: #e5e7eb;
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.card {
  background: #020617;
  padding: 22px;
  width: 400px;
  border-radius: 16px;
  box-shadow: 0 0 30px rgba(34,197,94,0.15);
}

h2 {
  text-align: center;
  color: #22c55e;
  margin-bottom: 10px;
}

input, select {
  width: 100%;
  padding: 9px;
  margin-top: 8px;
  background: #020617;
  color: #e5e7eb;
  border: 1px solid #020617;
  border-radius: 8px;
}

button {
  width: 100%;
  padding: 12px;
  margin-top: 12px;
  background: linear-gradient(135deg,#22c55e,#16a34a);
  border: none;
  border-radius: 10px;
  font-weight: bold;
  cursor: pointer;
}

.result {
  margin-top: 12px;
  line-height: 1.6;
  font-size: 14px;
}

canvas {
  margin-top: 12px;
  background: #020617;
  border-radius: 10px;
}
</style>
</head>

<body>
<div class="card">
  <h2>Investment Calculator</h2>

  <input id="lumpsum" type="number" placeholder="Lumpsum (â‚¹)">
  <input id="sip" type="number" placeholder="SIP Amount (â‚¹)">

  <select id="sipFreq">
    <option value="365">Daily SIP</option>
    <option value="52">Weekly SIP</option>
    <option value="12" selected>Monthly SIP</option>
    <option value="1">Yearly SIP</option>
  </select>

  <input id="rate" type="number" placeholder="Your Expected Return (%)">

  <input id="time" type="number" placeholder="Duration">
  <select id="timeUnit">
    <option value="365">Days</option>
    <option value="12" selected>Months</option>
    <option value="1">Years</option>
  </select>

  <button onclick="calculate()">Calculate</button>

  <div class="result" id="output"></div>
  <canvas id="chart" width="360" height="200"></canvas>
</div>

<script>
const inflationRate = 0.0654;
const niftyRate = 0.12;

function futureValue(lump, sip, rate, freq, years) {
  let r = rate / freq;
  let n = years * freq;

  let fvLump = lump * Math.pow(1 + rate, years);
  let fvSip = sip * ((Math.pow(1 + r, n) - 1) / r) * (1 + r);

  return fvLump + fvSip;
}

function drawLine(ctx, data, color) {
  ctx.beginPath();
  ctx.strokeStyle = color;
  ctx.lineWidth = 2;

  data.forEach((v, i) => {
    let x = 30 + i * 30;
    let y = 170 - v;
    if (i === 0) ctx.moveTo(x, y);
    else ctx.lineTo(x, y);
  });

  ctx.stroke();
}

function drawGraph(user, infl, nifty) {
  const canvas = document.getElementById("chart");
  const ctx = canvas.getContext("2d");
  ctx.clearRect(0,0,canvas.width,canvas.height);

  ctx.strokeStyle = "#444";
  ctx.beginPath();
  ctx.moveTo(30,10);
  ctx.lineTo(30,170);
  ctx.lineTo(350,170);
  ctx.stroke();

  drawLine(ctx, user, "#22c55e");    // Your return
  drawLine(ctx, infl, "#ef4444");    // Inflation
  drawLine(ctx, nifty, "#3b82f6");   // Nifty 50
}

function calculate() {
  let lump = +lumpsum.value;
  let sip = +sipInput.value;
  let userRate = +rate.value / 100;

  let freq = +sipFreq.value;
  let time = +timeInput.value;
  let unit = +timeUnit.value;

  let years = time / unit;
  let periods = years * freq;

  let invested = lump + sip * periods;

  let userFV = futureValue(lump, sip, userRate, freq, years);
  let inflFV = futureValue(lump, sip, inflationRate, freq, years);
  let niftyFV = futureValue(lump, sip, niftyRate, freq, years);

  let cagr = ((userFV / invested) ** (1 / years) - 1) * 100;

  output.innerHTML = `
    ðŸ’° Invested: â‚¹${Math.round(invested).toLocaleString()}<br>
    ðŸ“ˆ Your Value: â‚¹${Math.round(userFV).toLocaleString()}<br>
    ðŸ”¥ Inflation Value: â‚¹${Math.round(inflFV).toLocaleString()}<br>
    ðŸ‡®ðŸ‡³ NIFTY 50 Value: â‚¹${Math.round(niftyFV).toLocaleString()}<br>
    ðŸ“Š CAGR: ${cagr.toFixed(2)}%
  `;

  let userLine=[], inflLine=[], niftyLine=[];
  for(let y=1;y<=Math.floor(years);y++){
    userLine.push(futureValue(lump,sip,userRate,freq,y)/10000);
    inflLine.push(futureValue(lump,sip,inflationRate,freq,y)/10000);
    niftyLine.push(futureValue(lump,sip,niftyRate,freq,y)/10000);
  }

  drawGraph(userLine, inflLine, niftyLine);
}

// shortcuts
const lumpsum = document.getElementById("lumpsum");
const sipInput = document.getElementById("sip");
const rate = document.getElementById("rate");
const sipFreq = document.getElementById("sipFreq");
const timeInput = document.getElementById("time");
const timeUnit = document.getElementById("timeUnit");
const output = document.getElementById("output");
</script>
</body>
</html>
